{% extends 'partials/main.html.twig' %}

{% block stylesheets %}

{{ parent() }}

<!-- jsvectormap css -->
<link href="{{ asset('libs/jsvectormap/css/jsvectormap.min.css') }}" rel="stylesheet" type="text/css" />

<!--Swiper slider css-->
<link href="{{ asset('libs/swiper/swiper-bundle.min.css') }}" rel="stylesheet" type="text/css" />

{% endblock %}

{% block content %}

<div class="container-fluid">

    <div class="row">
        <div class="col-xl-12 col-lg-12">
            <div class="card card-height-100">
                <div class="card-header align-items-center d-flex">

                    <h4 class="card-title mb-0 flex-grow-1 text-uppercase">
                        {{ title }}
                    </h4>

                    <div id="btn-datatable-dt-buttons" class="float-end">
                        <a href="{{ path('app_secure_new_flight') }}" class="btn btn-primary btn-label">
                            <i class="ri-add-line label-icon align-middle fs-16 me-2"></i>
                            Crear nueva vuelo
                        </a>
                    </div>

                </div>
                <div class="card-body">
                    <div>
                        <table id="flights" class="table table-striped">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Aeropuerto de origen</th>
                                    <th>Aeropuerto de destino</th>
                                    <th>Nro de vuelo</th>
                                    <th>Frecuencia de vuelo</th>
                                    <th>Horario de partida</th>
                                    <th>Horario de arribo</th>
                                    <th>Tipo de aeronave</th>
                                    <th>Fecha de vigencia</th>
                                    <th>Fecha de suspenci√≥n</th>
                                    <th></th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for flight in flights %}
                                <tr>

                                    <td>
                                        {{ flight.id }}
                                    </td>

                                    <td>
                                        {{ flight.originAirport }}
                                    </td>

                                    <td>
                                        {{ flight.arrivalAirport }}
                                    </td>

                                    <td>
                                        {{ flight.flightNumber }}
                                    </td>

                                    <td>
                                        {{ flight.flightFrequency }}
                                    </td>

                                    <td>
                                        {{ flight.departureTime|date('H:i') }}
                                    </td>

                                    <td>
                                        {{ flight.arrivalTime|date('H:i') }}
                                    </td>
                                    <td>
                                        {{ flight.aircraftType }}
                                    </td>
                                    <td>
                                        {{ flight.effectiveDate|date('d/m/Y') }}
                                    </td>
                                    <td>
                                        {{ flight.discontinueDate|date('d/m/Y') }}
                                    </td>
                                    <td>
                                        <a href="{{ path('app_secure_edit_flight', { 'id':flight.id}) }}"
                                            title="Editar vuelo" class="text-warning"><i class="ri-edit-2-line"></i></a>
                                    </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div><!-- end card body -->
            </div><!-- end card -->
        </div><!-- end col -->
    </div><!-- end row -->




</div>

{% endblock %}

{% block javascripts %}

{{ parent() }}

<script>
    $(document).ready(() => {
        initDataTable();
    })

    const initDataTable = () => {
        let table = new DataTable('#flights', {
            language: {
                url: '//cdn.datatables.net/plug-ins/2.1.5/i18n/es-MX.json',
            },
        });
    }
</script>

{% endblock %}